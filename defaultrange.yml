# yaml-language-server: $schema=https://docs.ludus.cloud/schemas/range-config.json

ludus:
  - vm_name: "{{ range_id }}-ad-dc-win2022-server-x64"
    hostname: "{{ range_id }}-DC01-2022"
    template: win2022-server-x64-template
    vlan: 10
    ip_last_octet: 11
    ram_gb: 8
    cpus: 4
    windows:
      sysprep: false
    domain:
      fqdn: linax.local
      role: primary-dc
    roles:
      - ludus_ansible_DNS
      - ludus_ansible_adusers
      - ludus_ansible_wefsettings
      - ludus_ansible_spn
      - ludus_ansible_gpo
      - ludus_ansible_updategp
      - ludus_ansible_reboot
    role_vars:
      domain_path: "DC=linax,DC=local"
      domain_fqdn: "linax.local"
      dns_zone: "linax.local"
  - vm_name: "{{ range_id }}-Server2022-Fileserver"
    hostname: "{{ range_id }}-FileServer2022"
    template: win2022-server-x64-template
    vlan: 10
    ip_last_octet: 12
    ram_gb: 4
    cpus: 2
    windows:
      sysprep: true
      chocolatey_ignore_checksums: false
      chocolatey_packages:
        - vscodium
      autologon_user: domainadmin
      autologon_password: password
    domain:
      fqdn: linax.local
      role: member
    roles:
      - ludus_ansible_wefsettings
      - ludus_ansible_updategp
      - ludus_ansible_reboot
  - vm_name: "{{ range_id }}-ad-win11-22h2-enterprise-x64-1"
    hostname: "{{ range_id }}-WIN11-22H2-1"
    template: win11-22h2-x64-enterprise-template
    vlan: 10
    ip_last_octet: 21
    ram_gb: 4
    cpus: 2
    windows:
      sysprep: true
      chocolatey_packages:
        - vscodium
        - googlechrome
      office_version: 2021
      office_arch: 64bit
      autologon_user: domainadmin
      autologon_password: password
    domain:
      fqdn: linax.local
      role: member
    roles:
      - ludus_ansible_wefsettings
      - ludus_ansible_updategp
      - ludus_ansible_reboot
network:
  inter_vlan_default: REJECT
  rules:
    - name: Only allow windows to kali on 443
      vlan_src: 10
      vlan_dst: 99
      protocol: tcp
      ports: 443
      action: ACCEPT
    - name: Only allow windows to kali on 80
      vlan_src: 10
      vlan_dst: 99
      protocol: tcp
      ports: 80
      action: ACCEPT
    - name: Only allow windows to kali on 8080
      vlan_src: 10
      vlan_dst: 99
      protocol: tcp
      ports: 8080
      action: ACCEPT
    - name: Allow kali to all windows
      vlan_src: 99
      vlan_dst: 10
      protocol: all
      ports: all
      action: ACCEPT
